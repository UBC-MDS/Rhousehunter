---
title: "`rhousehunter` Vignette"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{rhousehunter-vignette}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(tidyverse)
#library(Rhousehunter)

```

House hunting can be a daunting experience given there is so much information to consider. `rhousehunter` aims to simplify the information collection process for end users with four simple function syntax in R.

This document will shows you how to use the functions of `rhousehunter` package to gather rental information on Craiglist with ease.


#### Scraping
The first function in our package is the `scraper()`. Here you will input a Craigslist housing url for the main housing and apartment rentals page of Craigslist BC and designate the argument `online = True` to scrape directly from the internet. When `online = False` the scraper function will scrape from a local HTML file, this may be handy if the Craigslist website is down or for internal development and test. Please note that you cannot input the url for an individual listing.  

```{r}
url <- "https://vancouver.craigslist.org/d/apartments-housing-for-rent/search/apa"

scraped_data <- scraper(url, online = TRUE) %>% 

```


```python 
from pyhousehunter import scraper
# Craiglist rental page url 
url = "https://vancouver.craigslist.org/d/apartments-housing-for-rent/search/apa"
# Scrape Craigslist 
scraped_data = scraper.scraper(url, online = True)
```
#### Cleaning
Our `data_cleaner()` function is straightforward and powerful tool. It turns the raw Pandas DataFrame generated by the `scraper()` function into a clean and tidy DataFrame object. It has a single input, which is the output of the `scraper()` function.
```python 
from pyhousehunter import cleaner
# Clean the scraped data
cleaned_data = cleaner.data_cleaner(scraped_data)
```
#### Filtering
The `filter()` function allows you to filter the cleaned data to find the rentals meeting your specifications. The inputs of this function include: the `data_cleaner()` generated Pandas DataFrame object along with the numeric values for the minimum price, maximum price, mimimum square feet, minimum number of bedrooms, and a string of the city name of the desired rentals. It ouputs a Pandas DataFrame object with the matching results.  
```python 
from pyhousehunter import filter
# Filter data based on preferences 
filtered_data = filter.data_filter(df = cleaned_data, min_price = 1500, max_price = 2000, sqrt_ft = 500, num_bedroom = 1, city_name = "Vancouver")
```
#### Emailing
At this stage, your filtered results are ready to be emailed to your inbox in a `.csv`. You will need to input your email address and the filtered dataframe. You haveÂ the choice to change the optional `email_subject` argument to set your own email subject. Once the email has been sent, the function will let you know that the `"Email has been successfully sent"`. If there was a problem in sending the email the function will print `"The email was not sent. The following SMTP error occurred in the process: <error>"`. We hope this package has facilitated your house-hunting.
```python 
from pyhousehunter import emailer
# Send email 
emailer.send_email(email_recipient  = "helloworld@gmail.com", filtered_data  = filtered_data, email_subject =  "Results from Saturday March 13th")
```
